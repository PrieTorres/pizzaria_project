<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CSS's Pizza</title>
    <link rel="stylesheet" href="css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Hepta+Slab:400,700|Lato:400,700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="./js/fazerPedido.js"></script>
    <script>
        async function carregarUser() {
            console.log("eu fui chamado")
            let decodedCookie = decodeURIComponent(document.cookie);

            if(decodedCookie.indexOf(";") != -1){
            console.log("eu fui chamado2")

                let userId = document.cookie.split(";")[1].split("=")[1];
                let user;
                
                await fetch(`user/${userId}`)
                .then(res => res = res.json())
                .then(data => user = data)
                .catch(err => console.log(err))

                console.log(user);
                localStorage.setItem("user", JSON.stringify(user));
            }else{
                let userId = document.cookie.split("=")[1];
                let user;
                
                await fetch(`user/${userId}`)
                .then(res => res = res.json())
                .then(data => user = data)
                .catch(err => console.log(err))

                console.log(user);
                localStorage.setItem("user", JSON.stringify(user));
            }
        }

        carregarUser();
    </script>
</head>
<body>
    <script>
        carregarUser();
    </script>
    <div class="header-maria">
        <nav class="navbar navbar-expand-lg bg-warning">
            <div class="container-fluid">
              <a class="navbar-brand" href="index.html">CSS' Pizza</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link" href="cardapio.html">Card√°pio</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="pedido.html">Cadastro</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="meus-pedidos.html">Meus Pedidos</a>
                    </li>
                  </ul>
              </div>
            </div>
          </nav>
    </div>
    <div class="models">
        <div class="pizza-item">
            <a href=""><!--nesse a que vai adicionar as pizzas ao carrinho-->
                <div class="pizza-item--img"><img src="" /></div>
                <div class="pizza-item--add">+</div>
            </a>
            <div class="pizza-item--price">R$ --</div>
            <div class="pizza-item--name">--</div>
            <div class="pizza-item--desc">--</div>
        </div>
        <div class="cart--item">
            <img src="" />
            <div class="cart--item-nome">--</div>
            <div class="cart--item--qtarea">
                <button class="cart--item-qtmenos">-</button>
                <div class="cart--item--qt">1</div>
                <button class="cart--item-qtmais" >+</button>
            </div>
        </div>
    </div>
    <header>
        <div class="menu-openner"><span>0</span>üõí</div>
    </header>
    <main>
        <div class="pizza-area"></div><!--√© dentro dessa div que vao ficar todas as pizzas-->
    </main>
    <aside> <!--aqui √© a parte do carrinho de compras-->
        <div class="cart--area">
            <div class="menu-closer">‚ùå</div>
            <h1>Suas Pizzas</h1>
            <div class="cart"></div>
            <div class="cart--details">
                <div class="cart--totalitem subtotal">
                    <span>Subtotal</span>
                    <span>R$ --</span>
                </div>
                <div class="cart--totalitem desconto">
                    <span>Desconto (-10%)</span>
                    <span>R$ --</span>
                </div>
                <div class="cart--totalitem total big">
                    <span>Total</span>
                    <span>R$ --</span>
                </div>
                <div class="cart--finalizar" onclick="comprarPizzas()">Finalizar a compra</div>
            </div>
        </div>
    </aside>
    <div class="pizzaWindowArea">
        <div class="pizzaWindowBody">
            <div class="pizzaInfo--cancelMobileButton">Voltar</div>
            <div class="pizzaBig">
                <img src="" />
            </div>
            <div class="pizzaInfo">
                <h1>--</h1>
                <div class="pizzaInfo--desc">--</div>
                <div class="pizzaInfo--sizearea">
                    <div class="pizzaInfo--sector">Tamanho</div>
                    <div class="pizzaInfo--sizes">
                        <div data-key="0" class="pizzaInfo--size selected">PEQUENA <span>--</span></div>
                        <div data-key="1" class="pizzaInfo--size">M√âDIO <span>--</span></div>
                        <div data-key="2" class="pizzaInfo--size">GRANDE <span>--</span></div>
                    </div>
                </div>
                <div class="pizzaInfo--pricearea">
                    <div class="pizzaInfo--sector">Pre√ßo</div>
                    <div class="pizzaInfo--price">
                        <div class="pizzaInfo--actualPrice">R$ --</div>
                        <div class="pizzaInfo--qtarea">
                            <button class="pizzaInfo--qtmenos">-</button>
                            <div class="pizzaInfo--qt">-</div>
                            <button class="pizzaInfo--qtmais">+</button>
                        </div>
                    </div>
                </div>
                <div class="pizzaInfo--addButton">Adicionar ao carrinho</div>
                <div class="pizzaInfo--cancelButton">Cancelar</div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="js/pizzas.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
</body>
</html>